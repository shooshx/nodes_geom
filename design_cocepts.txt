

The engine runs nodes
- runs variables resolve
- find the roots that need to be displayed (display node, template)
- maps from the roots who are the nodes that are dirty
    - need to be a separate step from run() step since run() may trigger dirtyness
- runs the dirty nodes and down towards the root

Node becomes dirty by
- parameter change
- connect/disconnect of a terminal
- The object in one of its terminals changed
    This is needed for A->B, when the user displays A, changes it, then displays B - B needs to be invalidated and not hold on to old object

Terminals
- Out terminals hold a real reference to objects, input terminals hold a weak reference
- if a node needs a mutable copy of an object coming in an input, calls get_mutable and the object is cloned
- The node keeps its output object as cache for future frames
- bad idea: having enabled/disabled terminals. Disabled terminal still has an invisible connection to it
New deal:
- Not clearing input variables anymore before each run
-   this is so that a node can really know if the input was dirty
- Instead of running node and dispersing the output to all lines, Before run, the node collects its inputs
- (normal objects) Output terminals has version, input check if what they have is the same as the last version produced by the output
- (variables) the value of the variables is checked instead of a version, in order to avoid a multi-terminals

Colors
- when dealing with images, ranges is 0-255 to r,g,b,alphai and 0-1 to alpha, as sampled from images
- when dealing with shaders, webgl, all is in range 0-1
    - ParamColor scales its values before doing gl.uniform
    - mesh attributes use need_normalize
    - shader coder expects to get values in [0-1]